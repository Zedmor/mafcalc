### Обзор калькулятора игры "Мафия"

#### Основные функции калькулятора:

**Фаза 1 - Интерфейс команд:**

1. **Запись событий:**
   - События фиксируются в формате `<источник> <действие> <цель>`.
   - Типы событий:
     - **s** - подозрение (уменьшает вероятность быть вместе на 20-30%).
     - **ss** - сильное подозрение.
     - **v** - проголосовал против (50-70% вероятность разрыва пары). Эта команда автоматически добавляется при вводе блока голосования.
     - **r** - запрос проверки от шерифа.
     - **cb** - проверен как черный.
     - **cr** - проверен как красный.
     - **o** - другие действия, разрывающие пару.
     - **rc** - запрашивает проверку на игрока.

   - События без цели:
     - **e** - исключение как красного игрока ночью.
     - **es** - исключение как вероятно красного игрока (применимо к шерифу).
     - **eo** - исключение неизвестного игрока (удаление).

2. **Генерация троек:**
   - Для каждого игрока генерируются все возможные тройки, предполагая, что он красный игрок.

3. **Отслеживание действий:**
   - Отображение всех действий, в которых участвует каждый игрок.

4. **Расчет "красности":**
   - Расчет и отображение вероятности каждого игрока быть черным игроком на основе действий.

**Примеры команд:**

- `1s7` - игрок 1 подозревает игрока 7.
- `1c7` - игрок 1 проверяет игрока 7 как черного.

**Запись голосования:**

Голосование записывается с указанием номера игрока, против которого голосуют, и номеров голосующих игроков. Формат: `<номер игрока>: <список голосующих игроков>`.

### Пример голосования:

```
2: 1,3,5
3: 2,6,8
5: 4,7,10
2: 1,3,5
3: 2,8
5: 4,6,7,10
```

**Пояснения:**

1. **Первый раунд голосования:**
   - `2: 1,3,5` — игроки 1, 3 и 5 голосуют против игрока 2.
   - `3: 2,6,8` — игроки 2, 6 и 8 голосуют против игрока 3.
   - `5: 4,7,10` — игроки 4, 7 и 10 голосуют против игрока 5.

   Голоса распределились поровну между игроками 2, 3 и 5, что требует переголосования.

2. **Переголосование:**
   - `2: 1,3,5` — игроки 1, 3 и 5 снова голосуют против игрока 2.
   - `3: 2,8` — игроки 2 и 8 голосуют против игрока 3.
   - `5: 4,6,7,10` — игроки 4, 6, 7 и 10 голосуют против игрока 5.

   Игрок 5 получает наибольшее количество голосов и исключается из игры.

**Команды для разрешения тупиковых ситуаций:**

1. **vel (vote elimination):**
   - Исключает всех игроков, участвовавших в голосовании, если голоса снова распределились поровну.

2. **novel (No vote elimination):**
   - Никто из игроков не исключается, и игра продолжается без изменений.

### Пример использования:

Если на повторном голосовании голоса распределились поровну между игроками 2, 3 и 5:

- Команда `vel` исключит всех троих (2, 3 и 5).
- Команда `novel` оставит всех в игре.

Эти команды помогают управлять ситуациями, когда голосование заходит в тупик, поддерживая динамику игры.

**Пример игрового протокола:**

```
9e
2: 1,3,5
3: 2,6,8
5: 4,7,10
2: 1,3,5
3: 2,6,8
5: 4,7,10
vel
```

В этом примере игрок 9 был убит ночью, а игроки 2, 3 и 5 были исключены после применения команды `vel`.

Пример протокола игры:
```
3s2
7s2
5s7
8s4
10rc9
3s4
4rc2
3rc2
9e
9s2
9s7
9s10
6cb3
3cb2
10s5
2: 1,3,5
3: 2,6,8
5: 4,7,10
2: 1,3,5
3: 2,8
5: 4,6,7,10
3cb8
6cr4
8: 1,3,7,10
3: 2,4,6,8
```

Давайте разберем протокол, следуя описанным правилам и командам:

### События и их интерпретация:

1. **3s2** - Игрок 3 подозревает игрока 2.
2. **7s2** - Игрок 7 подозревает игрока 2.
3. **5s7** - Игрок 5 подозревает игрока 7.
4. **8s4** - Игрок 8 подозревает игрока 4.
5. **10rc9** - Игрок 10 запрашивает проверку на игрока 9.
6. **3s4** - Игрок 3 подозревает игрока 4.
7. **4rc2** - Игрок 4 запрашивает проверку на игрока 2.
8. **3rc2** - Игрок 3 запрашивает проверку на игрока 2.
9. **9e** - Игрок 9 исключен ночью (предположительно красный).
10. **9s2** - Игрок 9 подозревал игрока 2.
11. **9s7** - Игрок 9 подозревал игрока 7.
12. **9s10** - Игрок 9 подозревал игрока 10.
13. **6cb3** - Игрок 6 проверяет игрока 3 как черного.
14. **3cb2** - Игрок 3 проверяет игрока 2 как черного.
15. **10s5** - Игрок 10 подозревает игрока 5.

### Голосование:

1. **Первый раунд голосования:**
   - **2: 1,3,5** — Игроки 1, 3 и 5 голосуют против игрока 2.
   - **3: 2,6,8** — Игроки 2, 6 и 8 голосуют против игрока 3.
   - **5: 4,7,10** — Игроки 4, 7 и 10 голосуют против игрока 5.

   Голоса распределились поровну между игроками 2, 3 и 5, что требует переголосования.

2. **Переголосование:**
   - **2: 1,3,5** — Игроки 1, 3 и 5 снова голосуют против игрока 2.
   - **3: 2,8** — Игроки 2 и 8 голосуют против игрока 3.
   - **5: 4,6,7,10** — Игроки 4, 6, 7 и 10 голосуют против игрока 5.

   В этом раунде игрок 5 получает наибольшее количество голосов и исключается из игры.

### Последующие события:

1. **3cb8** - Игрок 3 проверяет игрока 8 как черного.
2. **6cr4** - Игрок 6 проверяет игрока 4 как красного.

### Второй раунд голосования:

1. **8: 1,3,7,10** — Игроки 1, 3, 7 и 10 голосуют против игрока 8.
2. **3: 2,4,6,8** — Игроки 2, 4, 6 и 8 голосуют против игрока 3.

В этом раунде игроки 8 и 3 получают равное количество голосов. В зависимости от дальнейших действий (например, применения команд `vel` или `novel`), может быть принято решение об исключении обоих игроков или продолжении игры без изменений.

Интерпретация результатов калькулятора, при обработки этого протокола:

1. У игрока 3 (шерифа по одной из версий) - возможная команда только 268
2. У второго шерифа на 6 самая вероятная команда это 135, так как: 2 черная проверка 3 (скорее красный для нас), 4 наша красная проверка, 8 голосовал с ним против 3, а 1 и 5 голосовали против многовероятно красного игрока 2. 